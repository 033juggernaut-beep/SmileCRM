# Task 11 ‚Äî aiogram-–±–æ—Ç: /start –∏ –º–µ–Ω—é

## –¶–µ–ª—å

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Telegram-–±–æ—Ç–∞ –Ω–∞ aiogram:

- `/start`
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏
- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App

---

## –ß—Ç–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å —Å–¥–µ–ª–∞—Ç—å Cursor AI

> –í `backend/app/bot/` —Ä–µ–∞–ª–∏–∑—É–π aiogram –±–æ—Ç–∞:
> 
> 1. –°–æ–∑–¥–∞–π `bot.py`, –∫–æ—Ç–æ—Ä—ã–π:
>    - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç `Bot` –∏ `Dispatcher`.
>    - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç —Ä–æ—É—Ç–µ—Ä—ã –∏–∑ `handlers/`.
> 
> 2. –í `handlers/start.py`:
>    - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `/start`:
>      - –ü–æ–ª—É—á–∞–µ—Ç `telegram_user_id`.
>      - –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ backend API (`GET /bot/doctors/by-telegram-id` –∏–ª–∏ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞), —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ –≤—Ä–∞—á.
>      - –ï—Å–ª–∏ –Ω–µ—Ç:
>        - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –∫–Ω–æ–ø–∫–æ–π WebApp:
>          - "‘≥÷Ä’°’∂÷Å’æ’•’¨ (’¢’°÷Å’•’¨ Mini App)".
>      - –ï—Å–ª–∏ –µ—Å—Ç—å:
>        - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é.
> 
> 3. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:
>    - ReplyKeyboard —Å:
>      - ‚ûï ‘±’æ’•’¨’°÷Å’∂’•’¨ ’∂’∏÷Ä ’∫’°÷Å’´’•’∂’ø
>      - üìã ‘ª’¥ ’∫’°÷Å’´’•’∂’ø’∂’•÷Ä’®
>      - üí≥ ‘≤’°’™’°’∂’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂
>      - ‚ÑπÔ∏è ’ï’£’∂’∏÷Ç’©’µ’∏÷Ç’∂
>      - üîí ‘≥’°’≤’ø’∂’´’∏÷Ç’©’µ’°’∂ ÷Ñ’°’≤’°÷Ñ’°’Ø’°’∂’∏÷Ç’©’µ’∏÷Ç’∂
>    - –ü–æ –Ω–∞–∂–∞—Ç–∏—é –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏ –±–æ—Ç:
>      - –õ–∏–±–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—ä—è—Å–Ω—è—é—â–∏–π —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫—É WebApp –Ω–∞ –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.
> 
> 4. –ü–æ–¥–∫–ª—é—á–∏ aiogram –∫ FastAPI —á–µ—Ä–µ–∑ webhook:
>    - –í `main.py` –¥–æ–±–∞–≤—å endpoint `/bot/webhook`.
>    - –ü–æ–¥–≥–æ—Ç–æ–≤—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook (–≤—Ä–µ–º–µ–Ω–Ω—É—é CLI-–∫–æ–º–∞–Ω–¥—É –∏–ª–∏ startup-event).
> 
> –ü–æ–∫–∞ –º–æ–∂–Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å HTTPS ‚Äî —ç—Ç–æ —Å–¥–µ–ª–∞–µ–º –ø—Ä–∏ –¥–µ–ø–ª–æ–µ.

---

## –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å–∞–º–æ–º—É

1. –ü–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —É BotFather –∏ –ø–æ–ª–æ–∂–∏ –≤ `.env` (`TELEGRAM_BOT_TOKEN`).
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –ª–æ–∫–∞–ª—å–Ω–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ polling (–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç), –µ—Å–ª–∏ Cursor —Ä–µ–∞–ª–∏–∑—É–µ—Ç.
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ WebApp —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–ø–æ–∫–∞ –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π).

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- `/start` —Ä–∞–±–æ—Ç–∞–µ—Ç.
- –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é.
- –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App.
